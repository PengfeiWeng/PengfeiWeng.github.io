<!DOCTYPE html>
<html ng-app="yourTripPlanner" lang='en'>
  <head>
  	<meta charset="UTF-8">
	<title>Explore the world</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="description" content="Trip Planner">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <style>
    .map {
      height: 100%;
    }
  </style>
  
	<link data-require="bootstrap-css@3.3.6" data-semver="3.3.6" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.css" />
	<link data-require="font-awesome@*" data-semver="4.5.0" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.css" />
	<link rel="stylesheet" href="../css/bootstrapSuperhero.css">
	<link rel="stylesheet" href="../css/font-awesome.css">
	<link rel="stylesheet" href="../css/animate.css">
	<link rel="stylesheet" href="../css/main.css">
	<link rel="stylesheet" href="../css/yourTrip.css">
    <script data-require="angular.js@*" data-semver="1.5.0" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.js"></script>
    <script data-require="jquery@*" data-semver="2.2.0" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script data-require="bootstrap@*" data-semver="3.3.6" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  </head>
  
  <body ng-controller="yourTripController">
  	<header>
  	<nav class="navbar navbar-default navbar-fixed-top cbp-af-header">
	  <div class="container-fluid">
	    <!-- Brand and toggle get grouped for better mobile display -->
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
	        <span class="sr-only">Toggle navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </button>
	      <a class="navbar-brand" href="../index.html">YANA</a>
	    </div>
	
	    <!-- Collect the nav links, forms, and other content for toggling -->
	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	      <ul class="nav navbar-nav navbar-right">
	      	<li><a href="../index.html">Home</a></li>
	        <li><a href="#places">Places</a></li>
	        <li><a href="#details">Details</a></li>
	        <li><a href="#summary">Summary</a></li>
	      </ul>
	    </div><!-- /.navbar-collapse -->
	  </div><!-- /.container-fluid -->
	</nav>
  	</header>
  	
  		<div class='container-fluid'>
  			<section class='row' id='places'>
				<div class='fill-screen fixed-attachment second-img'>
					<h1>Here are the views</h1>
  					<p>Go somewhere you've dreamed of.</p>
					<a class='down-button' href='#details'>
	  			<i class='fa fa-arrow-circle-down fa-4x'></i>
	  			</a>
          <button onclick="toggleMap()">Toggle Days</button>
          <div id='map-layer'>
            <div class = 'map' id='map1'>
            </div>
            <div class = 'map' id='map2'>
            </div>
            <div class = 'map' id='map3'>
            </div>
            <div class = 'map' id='map4'>
            </div>
            <div class = 'map' id='map5'>
          </div>
          </div>
				</div>
  			</section>
  			
  			<section class='row'  id='details'>
  				<div class='fill-screen fixed-attachment second-img'>
  					<h1>Here are the details</h1>
  					<p>Go somewhere you've dreamed of.</p>
  				</div>
  			</section>
  			
  			<section class='row'  id='summary'>
  				<div class='fill-screen fixed-attachment second-img'>
  					<h1>Here are the summary</h1>
  					<div class="summary">
				      <input type="text" class="email" placeholder="email address" ng-model="email">
				      <button class="btn" type="button" ng-click="sendEmail()">
				        <span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>
				       </button>
				  	</div><!-- /input-group -->
				  	<textarea class="summaryDetail" placeholder="details and summary..."></textarea>
  				</div>
  			</section>
  			
  			
  		</div>
  	
  	<script src="../scripts/controllers/yourTripController.js"></script>
    <script src="../scripts/external/classie.js"></script>
    <script src="../scripts/external/cbpAnimatedHeader.js"></script>
    <script src="../scripts/external/jquery.easing.1.3.js"></script>
    <script src="../scripts/external/jquery.stellar.js"></script>
    <script>
    	$(function(){
    		/***
    		 * This is all about styling. Please DO NOT change!!!
    		 */
    		// make the background image attached to the window
    		$(window).on('load resize', function(){
    			$('.fill-screen').css('height', window.innerHeight);
    		});
    		// update sataus of navigation bar
    		$('body').scrollspy({
    			target: '.navbar'
    		});
    		// Scroll smoothly
    		$('nav a, .down-button').bind('click', function(){
    			$('html, body').animate({
    				scrollTop: $($(this).attr('href')).offset().top
    			}, 1500, 'easeInOutExpo');
    			event.preventDefault();
    		});
    		$(window).stellar();
    	});
      // TODO: don't use global variable
      var kmlLayer;
      var location;
      var counter = 1;

      function initMap() {
        // Go to YellowStone NP!!
        var geocoder = new google.maps.Geocoder();
        var address = "Yellow Stone";
        geocoder.geocode( { 'address': address}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK)
          {
              // do something with the geocoded result
              //
              location.lat = results[0].geometry.location.lat();
              location.lng = results[0].geometry.location.lng();
                                
              console.log("Location loaded successfully");

              // Create a map object and specify the DOM element for display.
              for (i = 1; i <= 5; i++) {
                var map = new google.maps.Map(document.getElementById('map'+i), {
                  center: location,
                  scrollwheel: false,
                  zoom: 6   // zoom level
                });
                                   
                var kmlLayer = new google.maps.KmlLayer({
                  url: 'https://sites.google.com/site/junlinyi/yellowstone-day'+i+'.kml',
                  map: map
                });           
              }
          }
        });  
      }

      // There's no easy way to access the internal nodes of a KML file
      // http://stackoverflow.com/questions/7975567/manipulating-kml-via-google-maps-api
      // Thus, we load mulitple KML files to mimic switching between trip days
      function toggleMap() {
        if (counter >= 5) {
          counter = 1;
        }
        for (var i = 1; i <= 5; i++) {
          map = document.getElementById('map'+i);
          if (i == counter) {
            map.style.height = '100%';
          }
          else {
            map.style.height = '0';
          }
        }
        counter++;
      } 

    </script>
  </body>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAl9UdtC2Qqws7hBTfIUOks7-Z6-Xjbz8k&callback=initMap">
  </script>
</html>